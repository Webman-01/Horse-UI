{"code":"import { computed, defineComponent, nextTick, onMounted, reactive, ref, watch, } from \"vue\";\nimport { virtualizedProps } from \"./virtualizedType\";\nimport { createNameSpace } from \"../../../utils/create\";\nexport default defineComponent({\n    name: \"HVirtualList\",\n    props: virtualizedProps,\n    setup(props, { slots }) {\n        const bem = createNameSpace(\"v\");\n        const showHeight = ref();\n        const scrollBarHeight = ref();\n        const state = reactive({\n            start: 0,\n            end: props.remain,\n        });\n        const visibleData = computed(() => {\n            return props.items.slice(state.start - prevData.value, state.end + nextData.value);\n        });\n        const prevData = computed(() => {\n            return Math.min(state.start, props.remain / 2);\n        });\n        const nextData = computed(() => {\n            return Math.min(props.remain / 2, props.items.length - state.end);\n        });\n        const scrollTopDistance = ref(0);\n        const handleScroll = () => {\n            const scrollTop = showHeight.value.scrollTop;\n            state.start = Math.floor(scrollTop / props.size);\n            state.end = state.start + props.remain;\n            scrollTopDistance.value =\n                props.size * state.start - props.size * prevData.value;\n        };\n        function initData() {\n            console.log(showHeight.value, 'oooo');\n            showHeight.value.style.height = props.remain * props.size + \"px\";\n            scrollBarHeight.value.style.height =\n                props.items.length * props.size + \"px\";\n        }\n        watch(() => props.items, initData);\n        onMounted(() => {\n            console.log('99999999');\n            nextTick(() => {\n                if (showHeight.value)\n                    initData();\n            });\n            console.log(showHeight.value, 'llllllllll');\n        });\n        return () => {\n            try {\n                return (<div class={bem.b()} ref={showHeight} onScroll={handleScroll}>\n            <div class={bem.e(\"scroll-bar\")} ref={scrollBarHeight}></div>\n            <div class={bem.e(\"scroll-list\")} style={{\n                        transform: `translate3d(0,${scrollTopDistance.value}px,0)`,\n                    }}>\n              {visibleData.value.map((node, index) => slots.default({ node }))}\n            </div>\n          </div>);\n            }\n            catch (error) {\n                console.error('Error in HVirtualList render function:', error);\n            }\n        };\n    },\n});\n//# sourceMappingURL=virtualized.jsx.map","references":["/Users/mamingzhe/Horse UI/node_modules/.pnpm/vue@3.4.21_typescript@5.4.2/node_modules/vue/dist/vue.d.ts","/Users/mamingzhe/Horse UI/packages/components/virtualized-list/src/virtualizedType.ts","/Users/mamingzhe/Horse UI/packages/utils/create.ts"],"map":"{\"version\":3,\"file\":\"virtualized.jsx\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../packages/components/virtualized-list/src/virtualized.tsx\"],\"names\":[],\"mappings\":\"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\"}"}
