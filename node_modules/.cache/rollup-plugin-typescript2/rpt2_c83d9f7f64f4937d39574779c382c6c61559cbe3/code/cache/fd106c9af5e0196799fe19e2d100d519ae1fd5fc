{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, renderSlot as _renderSlot, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { computed, provide } from \"vue\";\nimport { createNameSpace } from \"../../../utils/create\";\nimport { FormContextKey, formProps } from \"./form\";\nexport default _defineComponent(Object.assign({\n    name: \"h-form\",\n}, { __name: 'form', props: formProps, setup(__props, { expose: __expose }) {\n        const bem = createNameSpace(\"form\");\n        const props = __props;\n        const validate = (callback) => __awaiter(this, void 0, void 0, function* () {\n            let errors = {};\n            for (const field of fields) {\n                try {\n                    yield field.validate(\"\");\n                }\n                catch (error) {\n                    errors = Object.assign(Object.assign({}, errors), error.fields);\n                }\n                if (Object.keys(errors).length === 0) {\n                    return callback === null || callback === void 0 ? void 0 : callback(true);\n                }\n                else {\n                    if (callback) {\n                        callback === null || callback === void 0 ? void 0 : callback(false, errors);\n                    }\n                    else {\n                        return Promise.reject(errors);\n                    }\n                }\n            }\n        });\n        const fields = [];\n        const addField = (context) => {\n            fields.push(context);\n            setTimeout(() => {\n                console.log(fields);\n            }, 1000);\n        };\n        __expose({\n            validate,\n        });\n        const context = Object.assign(Object.assign({}, props), { addField });\n        provide(FormContextKey, context);\n        const style = computed(() => {\n            const { maxWidth } = props;\n            if (!maxWidth)\n                return {};\n            return Object.assign({}, (maxWidth ? { width: maxWidth + \"px\" } : {}));\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"form\", {\n                class: _normalizeClass(_unref(bem).b()),\n                style: _normalizeStyle(style.value)\n            }, [\n                _renderSlot(_ctx.$slots, \"default\")\n            ], 6));\n        };\n    } }));\n//# sourceMappingURL=form.vue?vue&type=script&setup=true&lang.js.map","references":["/Users/mamingzhe/Horse UI/node_modules/.pnpm/vue@3.4.21_typescript@5.4.2/node_modules/vue/dist/vue.d.ts","/Users/mamingzhe/Horse UI/node_modules/.pnpm/vue@3.4.21_typescript@5.4.2/node_modules/vue/dist/vue.d.ts","/Users/mamingzhe/Horse UI/node_modules/.pnpm/async-validator@4.2.5/node_modules/async-validator/dist-types/index.d.ts","/Users/mamingzhe/Horse UI/node_modules/.pnpm/vue@3.4.21_typescript@5.4.2/node_modules/vue/dist/vue.d.ts","/Users/mamingzhe/Horse UI/packages/utils/create.ts","/Users/mamingzhe/Horse UI/packages/components/form/src/form.ts","/Users/mamingzhe/Horse UI/packages/components/form/src/form-item.ts"],"map":"{\"version\":3,\"file\":\"form.vue?vue&type=script&setup=true&lang.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../packages/components/form/src/form.vue?vue&type=script&setup=true&lang.ts\"],\"names\":[],\"mappings\":\"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\"}"}
